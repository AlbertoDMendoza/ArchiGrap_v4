@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix shui: <http://www.w3.org/ns/shacl-ui#> .
@prefix ag: <http://archigraph.org/ontology#> .
@prefix shapes: <http://archigraph.org/shapes#> .

# =============================================================================
# ArchiGraph v4 SHACL UI Shapes
# Drives automatic form generation via SHACL 1.2 UI specification
# =============================================================================

shapes: a owl:Ontology ;
    rdfs:label "ArchiGraph v4 UI Shapes" ;
    rdfs:comment "SHACL 1.2 shapes with shui: annotations for generative UI" ;
    owl:versionInfo "1.0.0" ;
    owl:imports <http://archigraph.org/ontology#> .

# =============================================================================
# System Shape
# =============================================================================

shapes:SystemShape a sh:NodeShape ;
    sh:targetClass ag:System ;
    rdfs:label "System" ;
    rdfs:comment "Form shape for IT System entities" ;
    sh:order 1 ;

    # Name (required, text field, used as label)
    sh:property [
        sh:path ag:hasName ;
        sh:name "Name" ;
        sh:description "The name of the system" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:minLength 1 ;
        sh:maxLength 200 ;
        sh:order 1 ;
        shui:editor shui:TextFieldEditor ;
        shui:propertyRole shui:LabelRole
    ] ;

    # Description (optional, textarea)
    sh:property [
        sh:path ag:hasDescription ;
        sh:name "Description" ;
        sh:description "Detailed description of the system" ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:order 2 ;
        shui:editor shui:TextAreaEditor
    ] ;

    # Status (required, dropdown)
    sh:property [
        sh:path ag:hasStatus ;
        sh:name "Status" ;
        sh:description "Lifecycle status" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:in ("Active" "Deprecated" "Planned" "Retired") ;
        sh:order 3 ;
        shui:editor shui:EnumSelectEditor
    ] ;

    # Owner (optional, autocomplete actor)
    sh:property [
        sh:path ag:hasOwner ;
        sh:name "Owner" ;
        sh:description "Person or role responsible for this system" ;
        sh:class ag:Actor ;
        sh:maxCount 1 ;
        sh:order 4 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    # Location (optional, autocomplete)
    sh:property [
        sh:path ag:locatedAt ;
        sh:name "Location" ;
        sh:description "Where the system is hosted or deployed" ;
        sh:class ag:Location ;
        sh:maxCount 1 ;
        sh:order 5 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    # Supports capabilities (multi-select)
    sh:property [
        sh:path ag:supports ;
        sh:name "Supports" ;
        sh:description "Capabilities or processes this system supports" ;
        sh:or (
            [ sh:class ag:Capability ]
            [ sh:class ag:Process ]
        ) ;
        sh:order 6 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    # Dependencies (multi-select systems)
    sh:property [
        sh:path ag:dependsOn ;
        sh:name "Depends On" ;
        sh:description "Other systems this system depends on" ;
        sh:class ag:System ;
        sh:order 7 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    # Is Active (boolean)
    sh:property [
        sh:path ag:isActive ;
        sh:name "Active" ;
        sh:description "Whether the system is currently active" ;
        sh:datatype xsd:boolean ;
        sh:maxCount 1 ;
        sh:order 8 ;
        shui:editor shui:BooleanSelectEditor
    ] ;

    # Created Date (date picker)
    sh:property [
        sh:path ag:createdDate ;
        sh:name "Created Date" ;
        sh:description "When this system was first documented" ;
        sh:datatype xsd:date ;
        sh:maxCount 1 ;
        sh:order 9 ;
        shui:editor shui:DatePickerEditor
    ] .

# =============================================================================
# Capability Shape
# =============================================================================

shapes:CapabilityShape a sh:NodeShape ;
    sh:targetClass ag:Capability ;
    rdfs:label "Capability" ;
    rdfs:comment "Form shape for Business Capability entities" ;
    sh:order 2 ;

    sh:property [
        sh:path ag:hasName ;
        sh:name "Name" ;
        sh:description "The name of the capability" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:minLength 1 ;
        sh:order 1 ;
        shui:editor shui:TextFieldEditor ;
        shui:propertyRole shui:LabelRole
    ] ;

    sh:property [
        sh:path ag:hasDescription ;
        sh:name "Description" ;
        sh:description "What this capability enables the organization to do" ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:order 2 ;
        shui:editor shui:TextAreaEditor
    ] ;

    sh:property [
        sh:path ag:hasStatus ;
        sh:name "Status" ;
        sh:description "Maturity or lifecycle status" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:in ("Baseline" "Target" "Gap" "Retired") ;
        sh:order 3 ;
        shui:editor shui:EnumSelectEditor
    ] ;

    sh:property [
        sh:path ag:hasOwner ;
        sh:name "Owner" ;
        sh:description "Business owner of this capability" ;
        sh:class ag:Actor ;
        sh:maxCount 1 ;
        sh:order 4 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    sh:property [
        sh:path ag:partOf ;
        sh:name "Parent Capability" ;
        sh:description "Higher-level capability this belongs to" ;
        sh:class ag:Capability ;
        sh:maxCount 1 ;
        sh:order 5 ;
        shui:editor shui:AutoCompleteEditor
    ] .

# =============================================================================
# Actor Shape
# =============================================================================

shapes:ActorShape a sh:NodeShape ;
    sh:targetClass ag:Actor ;
    rdfs:label "Actor" ;
    rdfs:comment "Form shape for Actor entities (people, roles, org units)" ;
    sh:order 3 ;

    sh:property [
        sh:path ag:hasName ;
        sh:name "Name" ;
        sh:description "Name of the person, role, or organizational unit" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:minLength 1 ;
        sh:order 1 ;
        shui:editor shui:TextFieldEditor ;
        shui:propertyRole shui:LabelRole
    ] ;

    sh:property [
        sh:path ag:hasDescription ;
        sh:name "Description" ;
        sh:description "Responsibilities and context" ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:order 2 ;
        shui:editor shui:TextAreaEditor
    ] ;

    sh:property [
        sh:path ag:hasStatus ;
        sh:name "Status" ;
        sh:description "Current status" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:in ("Active" "Inactive" "Planned") ;
        sh:order 3 ;
        shui:editor shui:EnumSelectEditor
    ] ;

    sh:property [
        sh:path ag:locatedAt ;
        sh:name "Location" ;
        sh:description "Where this actor is based" ;
        sh:class ag:Location ;
        sh:maxCount 1 ;
        sh:order 4 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    sh:property [
        sh:path ag:uses ;
        sh:name "Uses Systems" ;
        sh:description "Systems this actor uses" ;
        sh:class ag:System ;
        sh:order 5 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    sh:property [
        sh:path ag:performs ;
        sh:name "Performs Processes" ;
        sh:description "Processes this actor performs" ;
        sh:class ag:Process ;
        sh:order 6 ;
        shui:editor shui:AutoCompleteEditor
    ] .

# =============================================================================
# Process Shape
# =============================================================================

shapes:ProcessShape a sh:NodeShape ;
    sh:targetClass ag:Process ;
    rdfs:label "Process" ;
    rdfs:comment "Form shape for Business Process entities" ;
    sh:order 4 ;

    sh:property [
        sh:path ag:hasName ;
        sh:name "Name" ;
        sh:description "Name of the business process" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:minLength 1 ;
        sh:order 1 ;
        shui:editor shui:TextFieldEditor ;
        shui:propertyRole shui:LabelRole
    ] ;

    sh:property [
        sh:path ag:hasDescription ;
        sh:name "Description" ;
        sh:description "What this process does, inputs, outputs" ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:order 2 ;
        shui:editor shui:TextAreaEditor
    ] ;

    sh:property [
        sh:path ag:hasStatus ;
        sh:name "Status" ;
        sh:description "Process status" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:in ("As-Is" "To-Be" "Deprecated") ;
        sh:order 3 ;
        shui:editor shui:EnumSelectEditor
    ] ;

    sh:property [
        sh:path ag:hasOwner ;
        sh:name "Process Owner" ;
        sh:description "Who is accountable for this process" ;
        sh:class ag:Actor ;
        sh:maxCount 1 ;
        sh:order 4 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    sh:property [
        sh:path ag:realizesCapability ;
        sh:name "Realizes Capability" ;
        sh:description "Which capability this process delivers" ;
        sh:class ag:Capability ;
        sh:order 5 ;
        shui:editor shui:AutoCompleteEditor
    ] ;

    sh:property [
        sh:path ag:partOf ;
        sh:name "Parent Process" ;
        sh:description "Higher-level process this belongs to" ;
        sh:class ag:Process ;
        sh:maxCount 1 ;
        sh:order 6 ;
        shui:editor shui:AutoCompleteEditor
    ] .

# =============================================================================
# Location Shape
# =============================================================================

shapes:LocationShape a sh:NodeShape ;
    sh:targetClass ag:Location ;
    rdfs:label "Location" ;
    rdfs:comment "Form shape for Location entities" ;
    sh:order 5 ;

    sh:property [
        sh:path ag:hasName ;
        sh:name "Name" ;
        sh:description "Name of the location" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:minLength 1 ;
        sh:order 1 ;
        shui:editor shui:TextFieldEditor ;
        shui:propertyRole shui:LabelRole
    ] ;

    sh:property [
        sh:path ag:hasDescription ;
        sh:name "Description" ;
        sh:description "Address or details about this location" ;
        sh:datatype xsd:string ;
        sh:maxCount 1 ;
        sh:order 2 ;
        shui:editor shui:TextAreaEditor
    ] ;

    sh:property [
        sh:path ag:hasStatus ;
        sh:name "Status" ;
        sh:description "Location status" ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:in ("Active" "Planned" "Closed") ;
        sh:order 3 ;
        shui:editor shui:EnumSelectEditor
    ] ;

    sh:property [
        sh:path ag:partOf ;
        sh:name "Parent Location" ;
        sh:description "Region or parent location" ;
        sh:class ag:Location ;
        sh:maxCount 1 ;
        sh:order 4 ;
        shui:editor shui:AutoCompleteEditor
    ] .
